# Domain Split Evaluation Configuration

# Per-domain breakdown
domain_breakdown:
  enabled: true
  
  # Domains to analyze
  domains:
    - codec
    - codec_q
  
  # Metrics per domain
  metrics:
    - eer
    - min_dcf
    - n_samples
    - n_bonafide
    - n_spoof

# Held-out domain evaluation (leave-one-out)
held_out:
  enabled: false  # Enable for custom domain generalization analysis
  
  # Which domain to hold out
  domain: codec  # codec or codec_q
  
  # Hold out specific values (if null, do leave-one-out for all)
  hold_out_values: null
  
  # Grouping to prevent leakage
  group_by: codec_seed  # Ensure coded variants stay together

gap_analysis:
  enabled: true
  metrics:
    - gap_eer      # EER_ood - EER_id
    - gap_min_dcf  # minDCF_ood - minDCF_id
    - ratio_eer    # EER_ood / EER_id

invariance:
  probe_accuracy:
    enabled: true
    per_layer: true
    classifier: logistic
    cv_folds: 5
  
  discriminator_accuracy:
    enabled: true
    log_per_epoch: true

visualization:
  enabled: true
  
  plots:
    - per_domain_eer_bar
    - per_domain_mindcf_bar
    - probe_accuracy_per_layer
    - erm_vs_dann_comparison
  
  output_dir: figures/domain_analysis
